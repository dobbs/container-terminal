#!/bin/bash

service=${1:-usage}
shift

known_services() {
  cat <<EOF
    coffee
    ruby
    gapi
EOF
}

usage() {
  cat <<EOF
usage: $(basename $0) <service> [command...]

  services:
$(known_services)
EOF
}

known_services | grep -q $service
if [ $? -ne 0 ]; then
  usage
  exit 1
else
  exec docker-compose --file $service.yml run --rm $service $@
fi
